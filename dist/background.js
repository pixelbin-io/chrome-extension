let o;chrome.runtime.onInstalled.addListener(()=>{console.log("Extension installed"),chrome.contextMenus.create({id:"openInFrame",title:"PixelBin.io",contexts:["editable","image"]},()=>{chrome.runtime.lastError?console.error(chrome.runtime.lastError):console.log("Context menu created")})});chrome.contextMenus.onClicked.addListener((e,r)=>{e.menuItemId==="openInFrame"&&(o=r.id,chrome.windows.create({url:"./src/mediaLibrary/popup.html",type:"popup",width:800,height:600},()=>{chrome.runtime.lastError&&console.error(chrome.runtime.lastError)}))});chrome.runtime.onMessage.addListener((e,r,t)=>{e.type==="getActiveTabId"?t({activeTabId:o}):e.type==="openMenu"&&chrome.windows.create({url:`./src/contextMenu/popup.html?imageUrl=${encodeURIComponent(e.imageUrl)}`,type:"popup",width:800,height:600},()=>{chrome.runtime.lastError&&console.error(chrome.runtime.lastError)})});
